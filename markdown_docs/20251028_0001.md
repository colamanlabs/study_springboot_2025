

# H2DB 분석

### 2025.10.29
```aiignore
H2 DB 관련 궁금했던 점을 정리합니다.
```



## 1. URL
https://www.h2database.com/html/main.html



## 2. 다운로드
https://www.h2database.com/html/main.html

```
Download 에서 "All Platforms(zip)" 을 선택해서 받는다.
h2-2025-09-22.zip
```


## 3. 설치
```aiignore
올 플랫폼 배포판으로 받았다.
별도의 설치 과정이 없다.
적당한 위치에 압축을 해제한다.
```

## 4. 실행
```aiignore
$H2_HOME\h2-2025-09-22\h2\bin

C:\WORKS\WORKS_DB\h2\h2-2025-09-22\h2\bin>dir
 C 드라이브의 볼륨: TASK
 볼륨 일련 번호: FCCE-BEC4

 C:\WORKS\WORKS_DB\h2\h2-2025-09-22\h2\bin 디렉터리

2025-10-28(화)  21:27    <DIR>          .
2025-10-28(화)  21:27    <DIR>          ..
2025-10-28(화)  21:27         2,685,418 h2-2.4.240.jar
2025-09-22(월)  18:19                98 h2.bat
2025-09-22(월)  18:19               109 h2.sh
2025-09-22(월)  18:19               105 h2w.bat
               4개 파일           2,685,730 바이트
               2개 디렉터리  1,441,035,329,536 바이트 남음

C:\WORKS\WORKS_DB\h2\h2-2025-09-22\h2\bin>


h2.bat -- java 로 실행되고, 콘솔 모드 실행
h2w.bat -- javaw 로 실행되고, 별도 로그가 출력되지 않음

```


## 5. 로깅
```aiignore

H2DB 예전 버전에는 표준출력, 표준에러 파일로깅이 필요하면 리다이렉션 적용해서 하라고 가이드 했었음

ex)
# log.txt 파일 표준출력 내용을 append 하고
# 표준에러 내용은 표준출력에 병합시킨다. (그래서, 최종 파일이 같이 찍힌다.)
$APP_COMMAND >> log.txt 2>&1

H2DB 최신버전에서는 일반적인 사용은 굳이 로깅이 불필요하니(zero config), 그냥 쓰라고 하는 정책.
필요시 알아서 할 것 수준으로 안내함

이는 h2db 는 경량 DB 이고, 실사용 DB 라면 MySQL(MariaDb) 등 고급 DB 를 사용할 것을 감안한 것임.
경량 간편 사용을 목적으로 한 것이라, 로깅 가치가 적다.

실제 실행시

TCP server running at tcp://XXX.XXX.XXX.XXX:9092 (others can connect)
Web Console server running at http://XXX.XXX.XXX.XXX:8082 (others can connect)

이상의 내용을 못찾음
```

## 6. 동작(접속)모드, 접속정보
```aiignore
3가지 이다.

embedded 모드
server 모드
in-memory 모드


1. embedd 모드
APP 의 프로세스 공간에서 실행되며, 별도의 DB 파일을 생성하여, 상태가 유지된다.
APP 의 프로세스 공간에 JDBC 드라이버 코드가 처리해준다. 실제 통신은 없다.
jdbc:h2:~/test 

2. server 모드
h2db 가 별도 프로세스로 실행된다.
별도 DB 파일을 생성하며, 상태가 유지된다.
jdbc:h2:tcp://localhost/~/test

3. in-menory 모드
embedd 모드 와 유사하다.
APP 의 프로세스 공간에서 실행되나, 별도의 DB 파일을 생성하지 않고, 메모리에 적재한다. APP 종료시 유실된다. 상태가 유지되지 않는다.
APP 의 프로세스 공간에 JDBC 드라이버 코드가 처리해준다. 실제 통신은 없다.
jdbc:h2:mem:~/test
```


## 7. GUI 콘솔
```aiignore
언어 선택이 있는데, 한국어를 지원한다.

in-menory 모드 접속 URL 로 할 경우, GUI 툴은 접속에 실패한다.
이는 in-memory 모드는 APP 에서 DB 를 만들고, 종료시 유실되는 것이라, 못쓴다.

embedd 모드, 또는 server 모드로 해야 한다.

-- 서버모드
jdbc:h2:tcp://localhost/~/test


"연결시험" 버튼 선택후, "시험 성공" 으로 응답받으면,
"연결" 버튼을 선택한다.

기본 비밀번호가 "" 라서 비워둔 채로 접속할 수 있다.
```


## 8. 테스트
```aiignore

최초접속하면 샘플 SQL 스크립트가 있다.

DROP TABLE IF EXISTS TEST;
CREATE TABLE TEST(ID INT PRIMARY KEY,
   NAME VARCHAR(255));
INSERT INTO TEST VALUES(1, 'Hello');
INSERT INTO TEST VALUES(2, 'World');
SELECT * FROM TEST ORDER BY ID;
UPDATE TEST SET NAME='Hi' WHERE ID=1;
DELETE FROM TEST WHERE ID=2;


실행하면 아래 패널에 실행결과가 나온다.

DROP TABLE IF EXISTS TEST;
갱신된 개수: 0
(1 ms)

CREATE TABLE TEST(ID INT PRIMARY KEY,
   NAME VARCHAR(255));
갱신된 개수: 0
(1 ms)

INSERT INTO TEST VALUES(1, 'Hello');
갱신된 개수: 1
(0 ms)

INSERT INTO TEST VALUES(2, 'World');
갱신된 개수: 1
(1 ms)

SELECT * FROM TEST ORDER BY ID;
ID  	NAME  
1	Hello
2	World
(2 행, 0 ms)

UPDATE TEST SET NAME='Hi' WHERE ID=1;
갱신된 개수: 1
(1 ms)

DELETE FROM TEST WHERE ID=2;
갱신된 개수: 1
(1 ms)
```


## 9. 다른 DB 툴로 접속

```aiignore
HeidiSQL 은 MySQL(MariaDB) 전용이므로 안된다.
DBeaver 에서 h2 접속을 지원한다.
새 연결창에 DB 명 입력시 주의한다. (~/test) 

로컬호스트 접속이면 복수 접속이 허용된다.
H2 GUI, DBeaver 동시 접속 성공.
```


## 10. JDBC 드라이버

```aiignore
압축해제후, /bin/h2-2.4.240.jar 파일이 JDBC 드라이버 역할을 한다.
```

## 11. JDBC 연결 테스트
```aiignore
import java.sql.Connection;
import java.sql.DriverManager;

public class H2ConnectTest
{
    public static void main(String[] args) throws Exception
    {
        // 1. 드라이버 로드 (H2는 JDBC 4.0 이상에서 생략 가능)
        Class.forName("org.h2.Driver");

        // 2. 연결
        Connection conn = DriverManager.getConnection("jdbc:h2:tcp://localhost/~/test", "sa", "");

        System.out.println("Connected to H2 Database!");
        conn.close();
    }
}


-- 실행결과
Connected to H2 Database!
```

# -- 끝 --



